<div class='container'>
  <h1>Locations</h1>

  <div class='row g-3'>
    <% @locations.each_with_index do |location, location_index| %>
      <div class='col-md-6 col-lg-4 d-flex'>
        <div class='card rounded-5 d-flex flex-column'>

          <div class='card-body d-flex flex-column'>
            <% carousel_id = "carouselExampleIndicators-#{location_index}" %>

            <div id="<%= carousel_id %>" class="carousel slide">

              <div class="carousel-indicators">
                <% location.images.each_with_index do |image, index| %>
                  <button type="button" data-bs-target="#<%= carousel_id %>" data-bs-slide-to="<%= index %>" class="<%= 'active' if index == 0 %>" aria-current="true" aria-label="Slide <%= index + 1 %>"></button>
                <% end %>
              </div>

              <div class="carousel-inner">
                <% location.images.each_with_index do |image, index| %>
                  <div class="carousel-item <%= 'active' if index == 0 %>">
                    <%= image_tag url_for(image), class: 'd-block w-100 rounded-4', style: 'height: 160px; object-fit: cover;', alt: "Image for #{location.name}" %>
                  </div>
                <% end %>
              </div>

              <button class="carousel-control-prev" type="button" data-bs-target="#<%= carousel_id %>" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>

              <button class="carousel-control-next" type="button" data-bs-target="#<%= carousel_id %>" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>

            </div>

            <div class="d-flex flex-column flex-grow-1">
              <h2 class='mt-3 fs-4'><%= location.name %></h2>
              <p><%= location.description %></p>
              <div class='mt-auto'>
                <h3 class='fs-5'>Level</h3>
                <p><%= location.level %></p>
              </div>
            </div>

          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
