<div class='container'>

    <div data-controller="typed" class="home-title">
      <div class="element-to-animate"></div>
    </div>


    <%# <h1 class="home-title"></h1> %>

    <div class="bg-content">
      <h2 class="fs-1 mb-3 ms-5 category-title">Categories</h2>

      <div id="allCategories" class="categories horizontal-scroll-container ms-3">
        <div class="d-flex">
          <div id="all" data-action="click->categories-filter#filter" data-category="all" class="categories-item active-category">
            <%= link_to 'All', '', class: 'link link-underline' %>
          </div>
          <div data-action="click->categories-filter#filter" data-category="schools" class="categories-item">
            <%= link_to 'Schools', '', class: 'link link-underline' %>
          </div>
          <div data-action="click->categories-filter#filter" data-category="shops" class="categories-item">
            <%= link_to 'Shops', '', class: 'link link-underline' %>
          </div>
          <div data-action="click->categories-filter#filter" data-category="spots" class="categories-item">
            <%= link_to 'Spots', '', class: 'link link-underline' %>
          </div>
        </div>
      </div>
      <br>

      <div class="d-flex ms-3">
        <div data-action="click->categories-filter#locations" data-categories-filter-target="locationBtn" class="location-filter">
          <%= link_to 'Filter by location', '', class: 'link link-underline' %>
        </div>
      </div>

      <div data-categories-filter-target="locations" class="d-none d-flex flex-wrap ms-3 mt-2 px-4 w-100" style="max-width: 650px;">

        <div>
          <div id="all-locations" data-action="click->categories-filter#filterByLocation" data-location="All locations" class="location-items active-location">
            <%= link_to "All locations", '', class: 'link link-underline' %>
          </div>
        </div>
        <div class="d-flex flex-wrap justify-content-center">
          <div data-action="click->categories-filter#filterByLocation" data-location="The North" class="location-items">
            <%= link_to "The north", '', class: 'link link-underline' %>
          </div>
          <div data-action="click->categories-filter#filterByLocation" data-location="West coast" class="location-items">
            <%= link_to "West coast", '', class: 'link link-underline' %>
          </div>
          <div data-action="click->categories-filter#filterByLocation" data-location="East coast" class="location-items">
            <%= link_to "East coast", '', class: 'link link-underline' %>
          </div>
          <div data-action="click->categories-filter#filterByLocation" data-location="The South" class="location-items">
            <%= link_to "The South", '', class: 'link link-underline' %>
          </div>
          <div data-action="click->categories-filter#filterByLocation" data-location="South East coast" class="location-items">
            <%= link_to "South East coast", '', class: 'link link-underline' %>
          </div>
        </div>

      </div>
    </div>

    <br>

    <% if params[:query].present? %>
      <div class="row g-2 row-cols-1 row-cols-md-2 row-cols-lg-3">
        <% if @cards.any? %>
          <%= render "cards" %>
        <% else %>
          <em>"Sorry we cannot find any corresponding entry"</em>
        <% end %>
      </div>
    <% else %>
    <div data-categories-filter-target="cards" class="row g-2 row-cols-1 row-cols-md-2 row-cols-lg-3">
      <%# rendu des cards dynamiquement par AJAX %>
    </div>

    <div class="d-flex mx-auto mt-5">
      <div data-action="click->categories-filter#loadMore" class="btn-load-more">
      <%= link_to 'Load More', '#', class: 'link link-underline'%>
      </div>
    </div>

  <% end %>
</div>

<script>
  window.addEventListener('scroll', function() {
    const title = document.querySelector('.home-title');
    const scrolled = window.scrollY;
    title.style.transform = `translateY(${scrolled * .1}px)`;
  });
</script>
